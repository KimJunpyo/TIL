# 코드스테이츠 32일차 정리(REST API)

생성일: 2023년 3월 29일 오전 10:47
태그: 코드스테이츠 일일 정리

# REST API

> Representational State Transfer API의 약자이며, 웹에서 사용되는 데이터나 리소스를 HTTP URI로 표현하고 HTTP를 통해 요청과 응답을 정의하는 방식
> 
- REST API는 REST 아키텍쳐 스타일의 디자인 원칙을 준수하는 API이다.
- REST 방법론을 위한 4단계로 구성된 RMM(Richardson MAturity Model, 리차드슨 성숙도 모델)이 존재한다.
    - **0단계**: HTTP 사용
    - **1단계**: 개별 리소스와의 통신 준수
    - **2단계**: HTTP 메소드 원칙 준수
    - **3단계**: HATEOUS 원칙 준수

![](https://velog.velcdn.com/images/player1552/post/ec499b1e-71e5-4464-97d0-cedfea1d1fc7/image.png)


        
- 위 RMM의 기준에서 2단계까지 원칙을 적용한 API를 HTTP API라고 부른다.
- 3단계까지의 기준을 모두 충족하며 REST API의 설계 규칙을 잘 준수한 API를 RESTful API라고 부른다.

## RMM 0단계-HTTP 사용

> HTTP를 사용하여 요청 및 응답을 진행하고 있는지에 대한 원칙
> 
- 단순히 HTTP만 사용해도 0단계는 모두 통과하게 된다.
- HTTP 통신을 했기 때문에 HTTP 상태 코드를 반환해주는게 일반적이지만, 개발자의 의도에 따라 굳이 추가하지 않아도 된다.

## RMM 1단계-개별 리소스와의 통신 준수(URI 사용)

> 웹에서 사용되는 모든 데이터나 리소스를 HTTP URI로 표현하는지에 대한 원칙
> 
- 요청하는 리소스의 위치를 특정하여 다른 리소스를 추가하거나 가져올 수 있도록 해야한다.
- ❗요청에 따른 응답에서 리소스 사용에 대한 **성공 / 실패의 여부를 반환**해야 한다.

<aside>
💡 ⇒ 200, 400 과 같이 HTTP 상태 코드를 반드시 반환해야하며 401, 403과 같이 오류의 이유가 명확한 경우가 아니라면 그 원인과 문제를 함께 반환시켜 주는 것이 좋다.

</aside>

## RMM 2단계-HTTP 메소드 원칙 준수

> CRUD에 따른 적합한 HTTP 메소드를 사용해서 요청하는지에 대한 원칙
> 
- GET 메소드의 경우, body(payload)를 가지지 않기 때문에 query parameter로 필요한 리소스를 전달해야 한다.
- 헤더에 Location: 요청한 URI 을 추가하여 함께 보내주는 것은 필수가 아니지만 헤더에 추가할 시, 좋은 API 디자인이라고 할 수 있다.
- POST / PUT / PATCH 은 용도에 맞게 리소스를 전달할 수 있도록 사용해야 한다.

### POST / PUT / PATCH 을 왜 용도에 맞게 써야 하는가?

- 이는 멱등성 때문이다.
- 멱등성이란, `어떤 대상에 같은 연산을 여러분 적용해도 결과가 달라지지 않는 설정` 이다.
    - POST 메소드는 `요청마다 새로운 리소스를 생성` 하기 때문에 리소스가 있는 공간에 또 다른 리소스를 추가하는 형태이며, `멱등성이 보장되지 않는다.`
    - PUT 메소드는 `요청마다 기존의 리소스를 전송한 리소스로 대체` 하는데, 같은 리소스 값을 계속 요청으로 보내게 되면, 결과값은 계속 리소스 값으로 나타나게 된다. 이럴 경우, 결과가 달라지지 않기 때문에 `멱등성이 보장된다.`
    - PATCH 메소드는 `요청마다 기존의 리소스 전부 혹은 일부분을 전송한 리소스로 대체` 하게 된다. 언뜻 보면 PUT과 다른 점은 일부분을 전송하는 것 밖에 없지만 일부분을 전송한다고 해서 결과값이 달라지진 않기 때문에 `멱등하다.`
    
    하지만 PATCH는 멱등을 보장받지 못한다. 즉, 멱등할수도 멱등하지 않을수도 있다는 말인데, 만약 PATCH로 `요청하는 기존 리소스의 특정 값에 특정 값을 더하는 리소스 전송`을 하게 된다면, `결과값은 요청때마다 계속 변화`하기 때문에 `멱등성을 보장하지 않는다.`

## RMM 3단계-HATEOAS

> Hypermedia As The Engine Of Application State의 약어로 하이퍼미디어 컨트롤을 적용하는지에 대한 원칙
> 
- 응답에 리소스의 URI을 포함한 링크 요소를 삽입하여 작성해야 한다.
- 특정 API를 요청한 뒤, 클라이언트 입장에서 응답을 받은 다음 단계로 할 수 있는 작업을 알려주는 것이 핵심이다.
- 즉, 응답 데이터에 다음 작업으로 필요한 리소스의 URI, 사용할 HTTP method를 받았다면, 클라이언트에서 받은 데이터를 이용해 다음 작업을 정적으로 하지 않고, 응답 데이터를 그대로 집어 넣어 동적으로 진행할 수 있게 된다.

# Open API

> 누구든지 사용할 수 있도록 공개한 API
> 
- ⚠️무제한으로 이용할 수 있다는 의미가 아니다.⚠️
- ⚠️각 API마다 정해진 이용 수칙이 있고, 그 이용 수칙에 따라 제한사항(가격, 정보의 제한 등)이 있을 수 있다.⚠️

## API Key

> 서버에 API로 통신하기 위해 필요한 열쇠
> 
- 서버를 통해서 데이터에 접근하는 행위들은 모두 비용이 발생하게 된다.
- API Key를 가진 클라이언트만 그 API에 접속할 수 있도록 제한을 거는 것이 API Key이다.
- ❗API Key가 필요하지 않은 경우도 있다.
- ❗API Key는 로그인한 사용자에게 자원 접근이 가능하도록 로그인 했을 때만 넘겨주는 경우가 대부분이다.

## 처음 듣거나 어려웠던 부분(암기할 부분)

프레임워크와 라이브러리의 차이